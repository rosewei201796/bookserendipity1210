<!DOCTYPE html>
<html>
<head>
    <title>è°ƒè¯•è¯„è®ºåŠŸèƒ½</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; cursor: pointer; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .channel { margin-bottom: 20px; padding: 15px; border: 2px solid #333; }
        .card { margin-left: 20px; padding: 10px; background: #fff; border-left: 3px solid #666; }
        .comment { margin-left: 40px; padding: 8px; background: #fffacd; }
    </style>
</head>
<body>
    <h1>ğŸ“ è¯„è®ºåŠŸèƒ½è°ƒè¯•å·¥å…·</h1>
    
    <button onclick="checkComments()">ğŸ” æ£€æŸ¥æ‰€æœ‰è¯„è®º</button>
    <button onclick="clearStorage()">ğŸ—‘ï¸ æ¸…é™¤å­˜å‚¨</button>
    <button onclick="location.reload()">ğŸ”„ åˆ·æ–°é¡µé¢</button>
    
    <div id="output"></div>

    <script>
        function checkComments() {
            const data = JSON.parse(localStorage.getItem('ai-book-channels-data') || '{}');
            const output = document.getElementById('output');
            
            if (!data.channels || data.channels.length === 0) {
                output.innerHTML = '<p style="color: red;">âŒ æ²¡æœ‰æ‰¾åˆ°ä»»ä½•é¢‘é“æ•°æ®</p>';
                return;
            }
            
            let html = '<h2>é¢‘é“å’Œè¯„è®ºæ•°æ®ï¼š</h2>';
            
            data.channels.forEach((channel, i) => {
                html += `<div class="channel">`;
                html += `<strong>é¢‘é“ ${i + 1}:</strong> ${channel.name || 'æœªå‘½å'} (${channel.author || 'æ— ä½œè€…'})`;
                html += `<br><small>ID: ${channel.id}, é¢„ç½®: ${channel.isPreset ? 'æ˜¯' : 'å¦'}</small>`;
                html += `<br><strong>å¡ç‰‡æ•°é‡:</strong> ${channel.cards ? channel.cards.length : 0}`;
                
                if (channel.cards && channel.cards.length > 0) {
                    channel.cards.forEach((card, j) => {
                        html += `<div class="card">`;
                        html += `<strong>å¡ç‰‡ ${j + 1}:</strong> ${card.text?.substring(0, 50)}...`;
                        html += `<br><small>ID: ${card.id}</small>`;
                        html += `<br><strong>è¯„è®ºæ•°é‡:</strong> ${card.comments ? card.comments.length : 0}`;
                        
                        if (card.comments && card.comments.length > 0) {
                            card.comments.forEach((comment, k) => {
                                html += `<div class="comment">`;
                                html += `<strong>è¯„è®º ${k + 1}:</strong> ${comment.personaEmoji} ${comment.personaName}`;
                                html += `<br>${comment.commentary?.substring(0, 100)}...`;
                                html += `</div>`;
                            });
                        } else {
                            html += `<br><small style="color: gray;">è¯¥å¡ç‰‡æš‚æ— è¯„è®º</small>`;
                        }
                        
                        html += `</div>`;
                    });
                }
                
                html += `</div>`;
            });
            
            output.innerHTML = html;
        }
        
        function clearStorage() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å­˜å‚¨æ•°æ®å—ï¼Ÿ')) {
                localStorage.removeItem('ai-book-channels-data');
                alert('å­˜å‚¨å·²æ¸…é™¤ï¼');
                location.href = '/';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
        window.onload = checkComments;
    </script>
</body>
</html>

